<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
	<meta charset="utf-8" />
	<meta name="description" content="Anthony Roumi's Personal Portfolio" />
	<meta name="keywords" content="HTML, CSS, JavaScript, Computer Engineer" />
	<meta name="author" content="Anthony Roumi" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="stylesheet" media="screen and (min-width: 950px)" href="styles/header.css"/>
	<link rel="stylesheet" media="screen and (max-width: 949px)" href="styles/dropdown.css"/>
  <link rel="stylesheet" media="screen" href="styles/rating.css"/>

	<script>console.log("Hire me!");</script>

	<title>Anthony Roumi</title>
	</head>
	<body>			
		<header class="header">
			<h1>
				<a href="/index.html"> Anthony Roumi</a>
			</h1>
			
			<label class="toggle">
				<span class="onoff"></span>
				<input type="checkbox" id="checkbox">
				<span class="slider"></span>
			</label>
			<noscript>
				<style>
					.toggle {
						display:none;
					}
				</style>
			</noscript>
				<nav class="navigation_bar">
					
					<button class="dropbtn">Menu</button>
					
					<ul class="dropdown">
							<li>
								<a href="/index.html">About Me</a>
							</li>
							<li>
								<a href="/experience.html">Experience</a>
							</li>
							<li>
								<a href="/projects.html">Projects</a>
							</li>
							<li>
								<a href="/contact_me.html">Contact</a>
							</li>
							<li class="current">
								<a href="/rating.html">Rate Me</a>
							</li>
							<li>
								<a href="mailto:aroumi@ucsd.edu"><img style="margin-top:.3em" src="/images/contacticons/mailicon.png" style="color:white;" alt="mail icon"></a>
							</li>
							<li>
								<a href="https://www.linkedin.com/in/anthony-roumi-6b647123b/"><img style="margin-top:.2em;" src="/images/contacticons/linkedinicon.png" alt="linkedin icon"></a>
							</li>
					</ul>
				</nav>
				</header>
        <main>
          
          
          <h1>Rating Widget</h1>

          <template id="stars">
            <style>
            span {
              display: flex;
              justify-content: center;
              margin-top: 2em;
            }
              ol {
                color: grey;
                display: flex;
                list-style-type: none;
                cursor: pointer;
                justify-content: center;
                align-content: center;
                margin-left: 1.2em;
                font-size: xx-large;
                gap: .2em;
                transform: scaleX(-1);
              }
              ol li {
                transition: all 80ms ease-out;
              }
              ol li:hover,
              ol li:hover ~ li {
                color: gold !important;
              }
            </style>
            
            <ol>
               <li id="fiveStar">&#9733;</li>
               <li id="fourStar">&#9733;</li>
               <li id="threeStar">&#9733;</li>
               <li id="twoStar">&#9733;</li> 
               <li id="oneStar">&#9733;</li>  
            </ol>
            <span id="ratingMsg"></span>
          </template>
          

<script type="module">
  class ratingWidget extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({mode: 'open'});
      const template = document.getElementById("stars");
      this.shadowRoot.innerHTML = template.innerHTML;
      let oneStar = this.shadowRoot.getElementById('oneStar');
      let twoStar = this.shadowRoot.getElementById('twoStar');
      let threeStar = this.shadowRoot.getElementById('threeStar');
      let fourStar = this.shadowRoot.getElementById('fourStar');
      let fiveStar = this.shadowRoot.getElementById('fiveStar');
      let ratingMsg = this.shadowRoot.getElementById('ratingMsg');
      function postData(rating) {
        const xhr = new XMLHttpRequest();
      xhr.open("POST", "https://httpbin.org/post");
      xhr.setRequestHeader("X-Sent-By", "Javascript");
      xhr.onload = () => {
        if (xhr.readyState == 4 && xhr.status == 200) {
          console.log(JSON.parse(xhr.responseText));
        } else {
          console.log(`Error: ${xhr.status}`);
        }
      };
      let body = JSON.stringify({sentBy : "JS", rating: rating});
      console.log(xhr.send(body));

      }
             oneStar.addEventListener('click', function () {
                oneStar.style.color = "gold";
                twoStar.style.color = "grey";
                threeStar.style.color = "grey";
                fourStar.style.color = "grey";
                fiveStar.style.color = "grey";
                ratingMsg.innerHTML = 'Aw man 1 star :( <br> Thank you for your feedback, I must do better!'; 
                postData(1);

              });
              twoStar.addEventListener('click', function () {
                oneStar.style.color = "gold";
                twoStar.style.color = "gold";
                threeStar.style.color = "grey";
                fourStar.style.color = "grey";
                fiveStar.style.color = "grey";
                ratingMsg.innerHTML = 'Man 2 stars :/ <br> Thank you for your feedback, I will do better!';
                postData(2);
              });
              threeStar.addEventListener('click', function () {
                oneStar.style.color = "gold";
                twoStar.style.color = "gold";
                threeStar.style.color = "gold";
                fourStar.style.color = "grey";
                fiveStar.style.color = "grey";
                ratingMsg.innerHTML = '3 stars is not bad. <br> Thank you for your feedback, I will make some improvements';
                postData(3);
              });
              fourStar.addEventListener('click', function () {
                oneStar.style.color = "gold";
                twoStar.style.color = "gold";
                threeStar.style.color = "gold";
                fourStar.style.color = "gold";
                fiveStar.style.color = "grey";
                ratingMsg.innerHTML = 'Thank you for a 4 star rating!';
                postData(4);
              });
              fiveStar.addEventListener('click', function () {
                oneStar.style.color = "gold";
                twoStar.style.color = "gold";
                threeStar.style.color = "gold";
                fourStar.style.color = "gold";
                fiveStar.style.color = "gold";
                ratingMsg.innerHTML = 'Wow 5 Stars! <br> Thank you for your feedback!';
                postData(5);
              });             
            }
    }
  window.customElements.define('rating-widget', ratingWidget);
</script>

          <rating-widget>
            <form action="https://httpbin.org/post" method="POST">
              <label for="rating">How satisfied are you?</label>
              <input type="hidden" name="question" value="How satisfied are you?">
              <input type="hidden" name="sentBy" value="HTML">
              <input type="number" id="rating" name="rating" min="1" max="5" value="0" required>
              <button type="submit">Submit</button>
            </form>
          </rating-widget>
          
        </main>
			<script src="/dark.js"></script>
		</body>
	</html>